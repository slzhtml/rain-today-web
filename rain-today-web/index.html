<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rain Today Pro SLZ</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="app">
  <div id="map"></div>

  <!-- Canvas overlay (vent particules) -->
  <canvas id="windCanvas"></canvas>

  <!-- Toast notifications (dans le site) -->
  <div id="toastHost" class="toast-host" aria-live="polite" aria-atomic="true"></div>

  <!-- Top bar: search + basemap switch + favorites -->
  <div class="topbar">
    <div class="left-stack">
      <div class="basemap-switch" role="group" aria-label="Fond de carte">
        <button id="bmOsm" class="chip active" type="button">OSM</button>
        <button id="bmSat" class="chip" type="button">Satellite</button>
      </div>

   <div class="search-wrap">
  <label class="search-label">
    <input
      id="citySearch"
      type="text"
      class="input"
      required
      placeholder="Rechercher une ville‚Ä¶"
      autocomplete="off"
    />
    <kbd class="slash-icon">/</kbd>

    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56.966 56.966" aria-hidden="true">
      <path d="M55.146 51.887 41.588 37.786A22.926 22.926 0 0 0 46.984 23c0-12.682-10.318-23-23-23s-23 10.318-23 23 10.318 23 23 23c4.761 0 9.298-1.436 13.177-4.162l13.661 14.208c.571.593 1.339.92 2.162.92.779 0 1.518-.297 2.079-.837a3.004 3.004 0 0 0 .083-4.242zM23.984 6c9.374 0 17 7.626 17 17s-7.626 17-17 17-17-7.626-17-17 7.626-17 17-17z"
            fill="currentColor"></path>
    </svg>
  </label>

  <div id="searchResults" class="search-results hidden"></div>
</div>


    <div class="fav-wrap">
      <button id="addFavBtn" class="btn" type="button">‚≠ê Ajouter favori</button>
      <div id="favList" class="fav-list"></div>
    </div>
  </div>

  <!-- Bottom panel -->
  <!-- ‚úÖ IMPORTANT: id="bottomPanel" pour le CSS mobile -->
  <div class="ui-panel" id="bottomPanel" role="region" aria-label="Contr√¥les m√©t√©o">
    
    <!-- ‚úÖ Bonus mobile: bouton pour r√©duire/ouvrir (ne g√™ne pas PC) -->
    <button id="togglePanelBtn" class="panel-toggle btn" type="button" aria-expanded="true">
      ‚¨á R√©duire
    </button>

    <div class="top-row">
      <div id="status">Chargement‚Ä¶</div>

      <div class="toggles">
        <label><input type="checkbox" id="radarToggle" checked> Pluie (radar)</label>
        <label><input type="checkbox" id="rainAutoToggle" checked> D√©placement pluie</label>
        <label><input type="checkbox" id="rainDirToggle" checked> Direction pluie</label>
        <label><input type="checkbox" id="windParticlesToggle" checked> Vent (particules)</label>
        <label><input type="checkbox" id="windArrowsToggle"> Vent (fl√®ches)</label>
        <button id="themeBtn" class="btn" type="button" title="Mode clair/sombre" aria-label="Mode clair/sombre">üåô</button>
      </div>
    </div>

    <div class="controls">
      <button id="playBtn" class="btn" type="button" title="Animer" aria-label="Lecture / Pause">‚è∏</button>
      <input type="range" id="timeline" min="0" max="10" value="0" />
      <span id="timeLabel"></span>
    </div>

    <div class="legend">
      <div class="legend-col">
        <div class="legend-title">Pluie (mm/h)</div>
        <div><span class="swatch rain-0"></span> 0 ‚Äì 0.2 (faible)</div>
        <div><span class="swatch rain-1"></span> 0.2 ‚Äì 2 (mod√©r√©e)</div>
        <div><span class="swatch rain-2"></span> 2 ‚Äì 10 (forte)</div>
        <div><span class="swatch rain-3"></span> 10+ (tr√®s forte)</div>
      </div>

      <div class="legend-col">
        <div class="legend-title">Vent (km/h)</div>
        <div><span class="swatch wind-0"></span> 0 ‚Äì 15 (calme)</div>
        <div><span class="swatch wind-1"></span> 15 ‚Äì 35</div>
        <div><span class="swatch wind-2"></span> 35 ‚Äì 60</div>
        <div><span class="swatch wind-3"></span> 60+ (tr√®s fort)</div>
      </div>

      <div class="legend-col">
        <div class="legend-title">Neige (cm/h)</div>
        <div><span class="swatch snow-0"></span> 0 ‚Äì 0.2 (faible)</div>
        <div><span class="swatch snow-1"></span> 0.2 ‚Äì 1 (mod√©r√©e)</div>
        <div><span class="swatch snow-2"></span> 1 ‚Äì 3 (forte)</div>
        <div><span class="swatch snow-3"></span> 3+ (tr√®s forte)</div>
      </div>

      <div class="legend-col">
        <div class="legend-title">Orage (risque)</div>
        <div><span class="swatch storm-0"></span> faible</div>
        <div><span class="swatch storm-1"></span> moyen</div>
        <div><span class="swatch storm-2"></span> √©lev√©</div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="js/script.js"></script>
</body>
</html>
